{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jatingoyal/Desktop/coding/react/netflix-clone-yt/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jatingoyal/Desktop/coding/react/netflix-clone-yt/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jatingoyal/Desktop/coding/react/netflix-clone-yt/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useMemo,useRef,useState}from\"react\";import Nav from\"./Nav\";import\"./Banner.css\";import axios from\"./axios\";import requests from\"./Requests\";//  this file includes nav bar tag so as to make of its functionality (background black when banner goes up )\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Banner(){// --------------------------------------------------- Nav Background colour change\nvar targetRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],handleShow=_useState2[1];var callBackFunction=function callBackFunction(entries){var _entries=_slicedToArray(entries,1),entry=_entries[0];handleShow(entry.isIntersecting);};var options=useMemo(function(){return{root:null,rootMargin:\"0px\",threshold:0.8};},[]);useEffect(function(){var observer=new IntersectionObserver(callBackFunction,options);var currentTarget=targetRef.current;if(currentTarget)observer.observe(currentTarget);return function(){if(currentTarget)observer.unobserve(currentTarget);};},[]);// --------------------------------------------------------- Banner work down here\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),movie=_useState4[0],setMovie=_useState4[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var request;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(requests.fetchNetflixOriginals);case 2:request=_context.sent;setMovie(request.data.results[Math.floor(Math.random()*request.data.results.length-1)]);return _context.abrupt(\"return\",request);case 5:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var truncate=function truncate(string,n){return(string===null||string===void 0?void 0:string.length)>n?string.substr(0,n-1)+\"...\":string;};// console.log(movie);\n// https://image.tmdb.org/t/p/w500/kqjL17yufvn9OVLyXYpvtyrFfak.jpg\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Nav,{show:show}),/*#__PURE__*/_jsxs(\"header\",{ref:targetRef,className:\"banner\",style:{backgroundSize:\"cover\",// backgroundImage: `url(\"https://image.tmdb.org/t/p/original/${movie?.backdrop_path}\")`,\nbackgroundImage:\"url(\\\"https://image.tmdb.org/t/p/w500/\".concat(movie.backdrop_path,\"\\\")\"),backgroundPosition:\"center center\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"banner_contents\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"banner_title\",children:(movie===null||movie===void 0?void 0:movie.name)||(movie===null||movie===void 0?void 0:movie.title)||(movie===null||movie===void 0?void 0:movie.original_name)}),/*#__PURE__*/_jsxs(\"div\",{className:\"banner_buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"banner_button\",children:\"Play\"}),/*#__PURE__*/_jsx(\"button\",{className:\"banner_button\",children:\"More Info\"})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"banner_description\",children:truncate(movie===null||movie===void 0?void 0:movie.overview,200)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"banner_fadebutton\"})]})]});}export default Banner;","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","Nav","axios","requests","Banner","targetRef","show","handleShow","callBackFunction","entries","entry","isIntersecting","options","root","rootMargin","threshold","observer","IntersectionObserver","currentTarget","current","observe","unobserve","movie","setMovie","fetchData","get","fetchNetflixOriginals","request","data","results","Math","floor","random","length","truncate","string","n","substr","backgroundSize","backgroundImage","backdrop_path","backgroundPosition","name","title","original_name","overview"],"sources":["/Users/jatingoyal/Desktop/coding/react/netflix-clone-yt/src/Banner.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport Nav from \"./Nav\";\nimport \"./Banner.css\";\nimport axios from \"./axios\";\nimport requests from \"./Requests\";\n\n//  this file includes nav bar tag so as to make of its functionality (background black when banner goes up )\n\nfunction Banner() {\n  // --------------------------------------------------- Nav Background colour change\n\n  const targetRef = useRef(null);\n  const [show, handleShow] = useState(false);\n\n  const callBackFunction = (entries) => {\n    const [entry] = entries;\n    handleShow(entry.isIntersecting);\n  };\n\n  const options = useMemo(() => {\n    return {\n      root: null,\n      rootMargin: \"0px\",\n      threshold: 0.8,\n    };\n  }, []);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(callBackFunction, options);\n    const currentTarget = targetRef.current;\n    if (currentTarget) observer.observe(currentTarget);\n\n    return () => {\n      if (currentTarget) observer.unobserve(currentTarget);\n    };\n  }, []);\n  // --------------------------------------------------------- Banner work down here\n\n  const [movie, setMovie] = useState([]);\n\n  useEffect(() => {\n    async function fetchData() {\n      const request = await axios.get(requests.fetchNetflixOriginals);\n      setMovie(\n        request.data.results[\n          Math.floor(Math.random() * request.data.results.length - 1)\n        ]\n      );\n\n      return request;\n    }\n\n    fetchData();\n  }, []);\n\n  const truncate = (string, n) => {\n    return string?.length > n ? string.substr(0, n - 1) + \"...\" : string;\n  };\n\n  // console.log(movie);\n\n  // https://image.tmdb.org/t/p/w500/kqjL17yufvn9OVLyXYpvtyrFfak.jpg\n\n  return (\n    <>\n      <Nav show={show} />\n\n      <header\n        ref={targetRef}\n        className=\"banner\"\n        style={{\n          backgroundSize: \"cover\",\n          // backgroundImage: `url(\"https://image.tmdb.org/t/p/original/${movie?.backdrop_path}\")`,\n          backgroundImage: `url(\"https://image.tmdb.org/t/p/w500/${movie.backdrop_path}\")`,\n          backgroundPosition: \"center center\",\n        }}\n      >\n        <div className=\"banner_contents\">\n          <h1 className=\"banner_title\">\n            {movie?.name || movie?.title || movie?.original_name}\n          </h1>\n          <div className=\"banner_buttons\">\n            <button className=\"banner_button\">Play</button>\n            <button className=\"banner_button\">More Info</button>\n          </div>\n          <h1 className=\"banner_description\">\n            {truncate(movie?.overview, 200)}\n          </h1>\n        </div>\n        <div className=\"banner_fadebutton\"></div>\n      </header>\n    </>\n  );\n}\n\nexport default Banner;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}